<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tradelogpro - Trading Calendar</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // --- CONSTANTS AND SETTINGS ---
        
        // Constants for English display
        const MONTHS_EN = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        const DAYS_OF_WEEK_EN = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];

        // Key for storing data in localStorage
        const STORAGE_KEY = 'tradingCalendarLocalDeals';

        let selectedDate = new Date();
        let currentYear = selectedDate.getFullYear();
        let currentMonth = selectedDate.getMonth();
        // Deals cache: { 'YYYY-MM-DD': [{id, description, date, timestamp, ...}] }
        let dealsData = {}; 
        let isAuthReady = true; // Always ready, since there is no authentication
        let editingDealId = null; // ID of the deal being edited

        // --- UTILITIES ---

        // Formats date to 'YYYY-MM-DD' string
        const formatDate = (date) => {
            const y = date.getFullYear();
            const m = String(date.getMonth() + 1).padStart(2, '0');
            const d = String(date.getDate()).padStart(2, '0');
            return `${y}-${m}-${d}`;
        };

        // --- LOCAL STORAGE ---

        // Load data from localStorage
        const loadDealsFromLocalStorage = () => {
            const storedData = localStorage.getItem(STORAGE_KEY);
            if (storedData) {
                try {
                    // Parsing the saved array
                    const dealsArray = JSON.parse(storedData);

                    // Transforming the array into the dealsData cache: { 'YYYY-MM-DD': [...] }
                    dealsData = dealsArray.reduce((acc, deal) => {
                        if (!acc[deal.date]) {
                            acc[deal.date] = [];
                        }
                        // Storing id as string, timestamp as ISO string for localStorage.
                        acc[deal.date].push(deal);
                        return acc;
                    }, {});

                    console.log(`Loaded ${dealsArray.length} trades from localStorage.`);
                } catch (e) {
                    console.error("Error parsing saved data:", e);
                    dealsData = {};
                }
            }
        };

        // Save data to localStorage
        const saveDealsToLocalStorage = () => {
            // Flatten dealsData back into a single array for saving
            const dealsArray = Object.values(dealsData).flat();
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(dealsArray));
            } catch (e) {
                console.error("Error saving data to localStorage:", e);
                showTemporaryMessage('Error: Could not save data to browser (localStorage).', 'red');
            }
        };

        // --- APPLICATION INITIALIZATION ---

        const initApp = () => {
            // 1. Load data from localStorage
            loadDealsFromLocalStorage();
            
            // 2. Render
            renderCalendar();
            displayDealsForSelectedDate();
        };


        // --- CALENDAR LOGIC ---

        const getDaysInMonth = (year, month) => new Date(year, month + 1, 0).getDate();
        const getFirstDayOfMonth = (year, month) => new Date(year, month, 1).getDay(); // 0 (Sun) - 6 (Sat)

        const renderCalendar = () => {
            const calendarGrid = document.getElementById('calendar-grid');
            const monthTitle = document.getElementById('current-month-year');
            calendarGrid.innerHTML = '';

            monthTitle.textContent = `${MONTHS_EN[currentMonth]} ${currentYear}`;

            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            // JS getDay() returns 0 for Sunday. We need Monday to be 0 for the grid structure.
            let firstDayIndex = (getFirstDayOfMonth(currentYear, currentMonth) + 6) % 7;

            // 1. Add day names (Mon, Tue, ...)
            DAYS_OF_WEEK_EN.forEach(day => {
                const dayName = document.createElement('div');
                dayName.className = 'text-center font-bold text-sm text-gray-700 p-1';
                dayName.textContent = day;
                calendarGrid.appendChild(dayName);
            });

            // 2. Add padding for days of the previous month
            for (let i = 0; i < firstDayIndex; i++) {
                const paddingDay = document.createElement('div');
                paddingDay.className = 'p-2 text-center text-sm bg-gray-50';
                calendarGrid.appendChild(paddingDay);
            }

            // 3. Add days of the current month
            const todayStr = formatDate(new Date());
            const selectedDateStr = formatDate(selectedDate);

            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(currentYear, currentMonth, day);
                const dateStr = formatDate(date);

                const dayElement = document.createElement('div');
                dayElement.className = 'p-2 text-center text-sm rounded-lg cursor-pointer transition duration-150 ease-in-out relative flex flex-col items-center justify-center h-16';

                // Style for today
                if (dateStr === todayStr) {
                    dayElement.classList.add('bg-blue-200', 'font-bold', 'hover:bg-blue-300', 'ring-2', 'ring-blue-500');
                } else {
                    dayElement.classList.add('bg-white', 'hover:bg-gray-100');
                }

                // Style for the selected day
                if (dateStr === selectedDateStr) {
                    dayElement.classList.remove('bg-blue-200', 'hover:bg-blue-300', 'ring-2', 'ring-blue-500');
                    dayElement.classList.add('bg-purple-500', 'text-white', 'font-bold', 'hover:bg-purple-600', 'shadow-lg');
                }

                // Day number
                const dayNumber = document.createElement('span');
                dayNumber.textContent = day;
                dayNumber.className = 'text-lg';

                dayElement.appendChild(dayNumber);

                // Add trade marker (Simple PnL indicator for calendar view could be added here later)
                if (dealsData[dateStr] && dealsData[dateStr].length > 0) {
                    const dealCount = dealsData[dateStr].length;
                    
                    // Calculate quick daily PnL for dot color
                    let dayPnL = 0;
                    dealsData[dateStr].forEach(d => {
                        if (d.type === 'profit') dayPnL += parseFloat(d.amount);
                        else dayPnL -= parseFloat(d.amount);
                    });

                    const marker = document.createElement('div');
                    marker.className = `w-2 h-2 rounded-full absolute bottom-1 right-1 ${dayPnL >= 0 ? 'bg-green-500' : 'bg-red-500'}`;
                    marker.title = `${dealCount} trades. PnL: ${dayPnL.toFixed(2)}`;
                    dayElement.appendChild(marker);

                    if (dateStr === selectedDateStr) {
                        marker.classList.replace('bg-green-500', 'bg-yellow-300'); 
                        marker.classList.replace('bg-red-500', 'bg-yellow-300'); 
                    }
                }

                dayElement.onclick = () => selectDate(date);

                calendarGrid.appendChild(dayElement);
            }
        };

        const navigateMonth = (direction) => {
            currentMonth += direction;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            } else if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            
            const newDate = new Date(currentYear, currentMonth, 1);
            const daysInNewMonth = getDaysInMonth(currentYear, currentMonth);
            if (selectedDate.getDate() > daysInNewMonth) {
                newDate.setDate(daysInNewMonth);
            } else {
                newDate.setDate(selectedDate.getDate());
            }
            selectDate(newDate);
        };

        const selectDate = (date) => {
            selectedDate = date;
            currentYear = date.getFullYear();
            currentMonth = date.getMonth();
            renderCalendar();
            displayDealsForSelectedDate();
            resetForm(); // Reset form when date changes
        };

        // --- TRADES LOGIC (CRUD) ---
        
        // Reset form
        const resetForm = () => {
            document.getElementById('deal-instrument').value = '';
            document.getElementById('deal-amount').value = '';
            document.getElementById('deal-description').value = '';
            document.querySelector('input[name="deal-type"][value="profit"]').checked = true;
            document.querySelector('input[name="deal-direction"][value="long"]').checked = true;

            editingDealId = null;
            document.getElementById('save-deal-btn').textContent = 'Save Trade';
            document.getElementById('cancel-edit-btn').classList.add('hidden');
        }

        // Load trade into form for editing
        window.startEditDeal = (deal) => {
            // 1. Set editing state
            editingDealId = deal.id;
            document.getElementById('save-deal-btn').textContent = 'Update Trade';
            document.getElementById('cancel-edit-btn').classList.remove('hidden');

            // 2. Fill the form
            document.getElementById('deal-instrument').value = deal.instrument;
            document.getElementById('deal-amount').value = deal.amount;
            document.getElementById('deal-description').value = deal.description;

            // 3. Select radio buttons
            try {
                document.querySelector(`input[name="deal-type"][value="${deal.type}"]`).checked = true;
                document.querySelector(`input[name="deal-direction"][value="${deal.direction}"]`).checked = true;
            } catch (e) {
                console.warn("Error setting radio buttons:", e);
            }

            // Scroll to form
            document.getElementById('deal-form-card').scrollIntoView({ behavior: 'smooth' });
        };
        
        // Delete trade
        window.deleteDeal = (dealId) => {
            const selectedDateStr = formatDate(selectedDate);
            
            if (dealsData[selectedDateStr]) {
                const initialLength = dealsData[selectedDateStr].length;
                // Filter the array, removing the deal
                dealsData[selectedDateStr] = dealsData[selectedDateStr].filter(deal => deal.id !== dealId);
                
                if (dealsData[selectedDateStr].length < initialLength) {
                    // Clean up empty array
                    if (dealsData[selectedDateStr].length === 0) {
                        delete dealsData[selectedDateStr];
                    }
                    saveDealsToLocalStorage(); // Save to localStorage
                    showTemporaryMessage('Trade successfully deleted!', 'green');
                } else {
                    showTemporaryMessage('Error: Trade not found.', 'red');
                }
            }
            renderCalendar(); 
            displayDealsForSelectedDate();
        };

        // Display trades for the selected date
        const displayDealsForSelectedDate = () => {
            const detailsPanel = document.getElementById('deal-details');
            const selectedDateStr = formatDate(selectedDate);
            // Get trades from the local cache
            const deals = dealsData[selectedDateStr] || [];

            document.getElementById('selected-date-display').textContent = `Selected Date: ${selectedDate.toLocaleDateString('en-US')}`;

            let html = '';

            // --- PnL CALCULATION START ---
            let dailyPnL = 0;
            let totalTrades = deals.length;
            
            if (deals.length > 0) {
                deals.forEach(deal => {
                    const amount = parseFloat(deal.amount) || 0;
                    if (deal.type === 'profit') {
                        dailyPnL += amount;
                    } else {
                        dailyPnL -= amount;
                    }
                });
            }

            const pnlColorClass = dailyPnL >= 0 ? 'text-green-600' : 'text-red-600';
            const pnlSign = dailyPnL > 0 ? '+' : '';
            
            // Add PnL Summary Card
            html += `
                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-200 mb-4 flex justify-between items-center">
                    <div>
                        <p class="text-xs text-gray-500 uppercase font-semibold">Daily Net PnL</p>
                        <p class="text-2xl font-bold ${pnlColorClass}">${pnlSign}${dailyPnL.toFixed(2)}</p>
                    </div>
                    <div class="text-right">
                         <p class="text-xs text-gray-500 uppercase font-semibold">Trades</p>
                         <p class="text-lg font-medium text-gray-800">${totalTrades}</p>
                    </div>
                </div>
            `;
            // --- PnL CALCULATION END ---

            if (deals.length === 0) {
                html += '<p class="text-gray-500 italic">No trades recorded for this day.</p>';
            } else {
                html += '<ul class="space-y-3">';
                // Sort by time (newest first)
                deals.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

                deals.forEach(deal => {
                    // Timestamp is stored as an ISO string, convert for display
                    const dateObj = new Date(deal.timestamp);
                    const timeStr = dateObj.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                    
                    const isProfit = deal.type === 'profit';
                    const amountColor = isProfit ? 'text-green-600' : 'text-red-600';
                    const amountSign = isProfit ? '+' : '-';
                    const amountDisplay = `${amountSign}${deal.amount ? parseFloat(deal.amount).toFixed(2) : 'N/A'}`;
                    
                    const directionText = deal.direction === 'long' ? 'Long (Buy)' : 'Short (Sell)';
                    const directionColor = deal.direction === 'long' ? 'bg-blue-100 text-blue-800' : 'bg-indigo-100 text-indigo-800';
                    
                    const instrumentDisplay = deal.instrument || 'N/A';

                    // Prepare the deal object string for the edit function call
                    const dealString = JSON.stringify(deal).replace(/"/g, '&quot;');

                    html += `
                        <li class="bg-white p-4 rounded-xl shadow-lg border-l-4 ${isProfit ? 'border-green-400' : 'border-red-400'} transition duration-150 relative">
                            <!-- Action Buttons -->
                            <div class="absolute top-2 right-2 flex space-x-2">
                                <button onclick="startEditDeal(${dealString})" 
                                        class="text-gray-500 hover:text-blue-500 transition" title="Edit">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>
                                </button>
                                <button onclick="deleteDeal('${deal.id}')" 
                                        class="text-gray-500 hover:text-red-500 transition" title="Delete">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                                </button>
                            </div>
                            
                            <div class="flex justify-between items-center mb-2 pr-12">
                                <span class="font-bold text-lg ${amountColor}">${amountDisplay}</span>
                                <span class="text-xs text-gray-500">${timeStr}</span>
                            </div>
                            
                            <p class="text-sm font-semibold text-gray-800 mb-1">Instrument: <span class="text-purple-600">${instrumentDisplay}</span></p>
                            
                            <div class="flex space-x-2 text-xs mb-2">
                                <span class="px-2 py-0.5 rounded-full font-medium ${directionColor}">${directionText}</span>
                            </div>

                            ${deal.description && deal.description.trim() !== '' ? 
                                `<p class="text-sm text-gray-600 border-t border-gray-100 pt-2 mt-2">Notes: ${deal.description}</p>`
                                : ''
                            }
                        </li>
                    `;
                });
                html += '</ul>';
            }
            detailsPanel.innerHTML = html;
        };

        const saveDeal = () => {
            // Read all fields
            const instrumentInput = document.getElementById('deal-instrument');
            const amountInput = document.getElementById('deal-amount');
            const descriptionInput = document.getElementById('deal-description');
            
            const instrument = instrumentInput.value.trim();
            const amount = parseFloat(amountInput.value);
            const description = descriptionInput.value.trim();
            const selectedDateStr = formatDate(selectedDate);

            // Read selected radio buttons
            const typeRadio = document.querySelector('input[name="deal-type"]:checked');
            const directionRadio = document.querySelector('input[name="deal-direction"]:checked');

            const type = typeRadio ? typeRadio.value : 'profit';
            const direction = directionRadio ? directionRadio.value : 'long';

            // Validation
            if (!instrument) {
                showTemporaryMessage('Please enter a trading instrument.', 'red');
                return;
            }
            if (isNaN(amount) || amount <= 0) {
                showTemporaryMessage('Please enter a valid trade amount (number > 0).', 'red');
                return;
            }
            
            // Data packet for Add and Update
            const dealData = {
                instrument: instrument,
                amount: amount, 
                type: type, 
                direction: direction, 
                description: description,
                date: selectedDateStr,
            };

            if (editingDealId) {
                // EDIT MODE: Update existing trade
                if (dealsData[selectedDateStr]) {
                    const index = dealsData[selectedDateStr].findIndex(d => d.id === editingDealId);
                    if (index !== -1) {
                        // Preserve original id and timestamp
                        dealsData[selectedDateStr][index] = {
                            ...dealsData[selectedDateStr][index],
                            ...dealData
                        };
                        showTemporaryMessage('Trade successfully updated!', 'green');
                    } else {
                        showTemporaryMessage('Error: Trade for update not found.', 'red');
                    }
                }
            } else {
                // ADD MODE: Add new trade
                const newDeal = {
                    ...dealData,
                    id: crypto.randomUUID(), // Generate unique ID
                    timestamp: new Date().toISOString() // Store timestamp as ISO string
                };
                
                if (!dealsData[selectedDateStr]) {
                    dealsData[selectedDateStr] = [];
                }
                dealsData[selectedDateStr].push(newDeal);
                showTemporaryMessage('Trade successfully saved!', 'green');
            }

            // Save to local storage and update view
            saveDealsToLocalStorage();
            renderCalendar();
            displayDealsForSelectedDate();

            // Reset form
            resetForm();
        };

        const showTemporaryMessage = (message, type) => {
            const msgEl = document.getElementById('deal-message');
            msgEl.textContent = message;
            msgEl.className = `p-2 mt-4 text-sm text-center font-medium rounded-lg ${type === 'green' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`;
            msgEl.classList.remove('hidden');

            setTimeout(() => {
                msgEl.classList.add('hidden');
            }, 3000);
        };

        // --- SETUP ---
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('prev-month-btn').onclick = () => navigateMonth(-1);
            document.getElementById('next-month-btn').onclick = () => navigateMonth(1);
            document.getElementById('prev-year-btn').onclick = () => { currentYear--; renderCalendar(); };
            document.getElementById('next-year-btn').onclick = () => { currentYear++; renderCalendar(); };
            document.getElementById('save-deal-btn').onclick = saveDeal;
            document.getElementById('cancel-edit-btn').onclick = resetForm; // Cancel edit

            // Initialize the application (now uses localStorage)
            initApp();
        });
    </script>

    <style>
        /* Custom styles */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
        }
        #calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }
        /* Custom styles for radio buttons */
        input[type="radio"] {
            appearance: none;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            border: 2px solid #ccc;
            transition: all 0.2s;
            cursor: pointer;
        }
        input[type="radio"]:checked {
            border-width: 5px;
        }
        input[name="deal-type"][value="profit"]:checked { border-color: #10B981; } /* Green */
        input[name="deal-type"][value="loss"]:checked { border-color: #EF4444; } /* Red */
        input[name="deal-direction"][value="long"]:checked { border-color: #3B82F6; } /* Blue */
        input[name="deal-direction"][value="short"]:checked { border-color: #6366F1; } /* Indigo */
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen">

    <header class="mb-6">
        <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Tradelogpro</h1>
        <!-- Auth status removed -->
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Calendar Column -->
        <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-2xl">
            <!-- Calendar Header -->
            <div class="flex justify-between items-center mb-6 border-b pb-4">
                <button id="prev-year-btn" class="p-2 text-gray-500 hover:text-purple-600 transition" title="Previous Year">
                    <svg class="w-5 h-5 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path></svg>
                </button>
                <button id="prev-month-btn" class="p-2 text-gray-500 hover:text-purple-600 transition" title="Previous Month">
                    <svg class="w-5 h-5 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                </button>
                <h2 id="current-month-year" class="text-2xl font-bold text-gray-800"></h2>
                <button id="next-month-btn" class="p-2 text-gray-500 hover:text-purple-600 transition" title="Next Month">
                    <svg class="w-5 h-5 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </button>
                <button id="next-year-btn" class="p-2 text-gray-500 hover:text-purple-600 transition" title="Next Year">
                    <svg class="w-5 h-5 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7m-8-14l7 7-7 7"></path></svg>
                </button>
            </div>

            <!-- Calendar Grid -->
            <div id="calendar-grid">
                <!-- Day names and month days will be rendered here by JS -->
            </div>
        </div>

        <!-- Details and Form Column -->
        <div class="lg:col-span-1 space-y-6">

            <!-- Add/Edit Trade Form -->
            <div id="deal-form-card" class="bg-white p-6 rounded-xl shadow-lg border border-purple-200">
                <h3 id="selected-date-display" class="text-xl font-bold text-gray-800 mb-4">Selected Date:</h3>
                <p class="text-lg font-semibold text-purple-600 mb-4 border-b pb-2">Add New Trade / Edit</p>

                <!-- Instrument -->
                <div class="mb-4">
                    <label for="deal-instrument" class="block text-sm font-medium text-gray-700 mb-1">Instrument:</label>
                    <input type="text" id="deal-instrument" placeholder="e.g., BTC, NASDAQ, EUR/USD"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500 transition">
                </div>

                <!-- Amount -->
                <div class="mb-4">
                    <label for="deal-amount" class="block text-sm font-medium text-gray-700 mb-1">Amount (Numeric Value):</label>
                    <input type="number" step="0.01" id="deal-amount" placeholder="0.00"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500 transition">
                </div>

                <!-- Type (Profit/Loss) -->
                <div class="mb-4 p-3 border border-gray-200 rounded-lg">
                    <label class="block text-sm font-bold text-gray-700 mb-2">Trade Type (+/-):</label>
                    <div class="flex space-x-6">
                        <label class="flex items-center">
                            <input type="radio" name="deal-type" value="profit" class="form-radio" checked>
                            <span class="ml-2 text-green-700 font-medium">Profit (+)</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="deal-type" value="loss" class="form-radio">
                            <span class="ml-2 text-red-700 font-medium">Loss (-)</span>
                        </label>
                    </div>
                </div>

                <!-- Direction (Long/Short) -->
                <div class="mb-4 p-3 border border-gray-200 rounded-lg">
                    <label class="block text-sm font-bold text-gray-700 mb-2">Direction (Long/Short):</label>
                    <div class="flex space-x-6">
                        <label class="flex items-center">
                            <input type="radio" name="deal-direction" value="long" class="form-radio" checked>
                            <span class="ml-2 text-blue-700">Long (Buy)</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="deal-direction" value="short" class="form-radio">
                            <span class="ml-2 text-indigo-700">Short (Sell)</span>
                        </label>
                    </div>
                </div>

                <!-- Description (Optional) -->
                <div class="mb-4">
                    <label for="deal-description" class="block text-sm font-medium text-gray-700 mb-1">Description (Optional Notes):</label>
                    <textarea id="deal-description" placeholder="Additional notes about the trade"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500 transition resize-none h-16"></textarea>
                </div>

                <div class="flex space-x-2">
                    <button id="save-deal-btn"
                        class="flex-1 bg-purple-600 text-white font-semibold py-3 rounded-xl hover:bg-purple-700 transition duration-300 shadow-md shadow-purple-300 transform hover:scale-[1.01]">
                        Save Trade
                    </button>
                    <button id="cancel-edit-btn"
                        class="hidden px-4 bg-gray-300 text-gray-700 font-semibold py-3 rounded-xl hover:bg-gray-400 transition duration-300 shadow-md" title="Cancel Edit">
                        Cancel Edit
                    </button>
                </div>

                <div id="deal-message" class="hidden mt-4"></div>
            </div>

            <!-- Trades for Selected Day -->
            <div class="bg-gray-100 p-6 rounded-xl shadow-lg">
                <h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">Trades for Selected Day</h3>
                <div id="deal-details" class="space-y-3">
                    <!-- Trades will be loaded here -->
                    <p class="text-gray-500 italic">Select a date to view trades.</p>
                </div>
            </div>
        </div>
    </main>
</body>
</html>
